{"ast":null,"code":"import _objectSpread from\"C:/Users/Shivam/Desktop/Academic-Source/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import axios from'axios';import{FaEnvelope,FaBook,FaUser,FaTag,FaImage,FaMoneyBillWave,FaClock}from'react-icons/fa';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API=axios.create({baseURL:process.env.REACT_APP_API_BASE});const Books=()=>{const[books,setBooks]=useState([]);const[currentPage,setCurrentPage]=useState(1);const booksPerPage=12;const fetchBooks=async()=>{try{const res=await API.get('/api/books');const booksWithState=res.data.map(book=>_objectSpread(_objectSpread({},book),{},{showEmail:false}));setBooks(booksWithState);}catch(error){console.error('Error fetching books:',error);}};useEffect(()=>{fetchBooks();},[]);const indexOfLastBook=currentPage*booksPerPage;const indexOfFirstBook=indexOfLastBook-booksPerPage;const currentBooks=books.slice(indexOfFirstBook,indexOfLastBook);const totalPages=Math.ceil(books.length/booksPerPage);return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-blue-50 to-blue-100 dark:from-gray-900 dark:to-gray-800 py-16 px-4\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-4xl font-bold text-center mb-12 text-blue-700 dark:text-yellow-300 flex justify-center items-center gap-3\",children:[/*#__PURE__*/_jsx(FaBook,{className:\"text-blue-600 dark:text-yellow-400\"}),\"Academic Source Available Books\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 max-w-6xl mx-auto\",children:currentBooks.map(book=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden transition hover:shadow-xl border dark:border-gray-700\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-48 overflow-hidden flex items-center justify-center bg-white dark:bg-gray-700\",children:book.image?/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(process.env.REACT_APP_API_BASE).concat(book.image),alt:book.name,className:\"h-full w-auto object-contain\",onError:e=>{e.target.onerror=null;e.target.src='https://via.placeholder.com/150';}}):/*#__PURE__*/_jsx(FaImage,{className:\"text-gray-400 text-5xl\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 space-y-2\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(FaTag,{}),\" \",book.name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-700 dark:text-gray-300 space-y-1\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(FaUser,{}),\" \",/*#__PURE__*/_jsx(\"strong\",{children:\"Seller:\"}),\" \",book.seller]}),/*#__PURE__*/_jsxs(\"p\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(FaMoneyBillWave,{}),\" \",/*#__PURE__*/_jsx(\"strong\",{children:\"Price:\"}),\" \\u20B9\",book.price]}),/*#__PURE__*/_jsxs(\"p\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(FaClock,{}),\" \",/*#__PURE__*/_jsx(\"strong\",{children:\"Uploaded:\"}),' ',new Date(book.createdAt).toLocaleDateString()]})]}),book.email?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setBooks(prevBooks=>prevBooks.map(b=>b._id===book._id?_objectSpread(_objectSpread({},b),{},{showEmail:!b.showEmail}):b)),className:\"inline-flex items-center gap-2 mt-2 text-white bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-sm transition\",children:[/*#__PURE__*/_jsx(FaEnvelope,{}),\" Contact Seller\"]}),book.showEmail&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-blue-700 dark:text-blue-300 text-sm font-medium\",children:book.email})]}):/*#__PURE__*/_jsxs(\"button\",{disabled:true,className:\"inline-flex items-center gap-2 mt-2 text-white bg-gray-400 px-4 py-2 rounded-lg text-sm cursor-not-allowed\",children:[/*#__PURE__*/_jsx(FaEnvelope,{}),\" Email Not Available\"]})]})]},book._id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-12 flex justify-center items-center gap-4\",children:[/*#__PURE__*/_jsx(\"button\",{disabled:currentPage===1,onClick:()=>setCurrentPage(prev=>prev-1),className:\"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded disabled:opacity-50\",children:\"Previous\"}),[...Array(totalPages)].map((_,idx)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage(idx+1),className:\"px-3 py-1 rounded \".concat(currentPage===idx+1?'bg-blue-600 text-white':'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200'),children:idx+1},idx+1)),/*#__PURE__*/_jsx(\"button\",{disabled:currentPage===totalPages,onClick:()=>setCurrentPage(prev=>prev+1),className:\"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded disabled:opacity-50\",children:\"Next\"})]})]});};export default Books;","map":{"version":3,"names":["React","useEffect","useState","axios","FaEnvelope","FaBook","FaUser","FaTag","FaImage","FaMoneyBillWave","FaClock","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API","create","baseURL","process","env","REACT_APP_API_BASE","Books","books","setBooks","currentPage","setCurrentPage","booksPerPage","fetchBooks","res","get","booksWithState","data","map","book","_objectSpread","showEmail","error","console","indexOfLastBook","indexOfFirstBook","currentBooks","slice","totalPages","Math","ceil","length","className","children","image","src","concat","alt","name","onError","e","target","onerror","seller","price","Date","createdAt","toLocaleDateString","email","onClick","prevBooks","b","_id","disabled","prev","Array","_","idx"],"sources":["C:/Users/Shivam/Desktop/Academic-Source/frontend/src/pages/Books.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport {\r\n  FaEnvelope,\r\n  FaBook,\r\n  FaUser,\r\n  FaTag,\r\n  FaImage,\r\n  FaMoneyBillWave,\r\n  FaClock,\r\n} from 'react-icons/fa';\r\n\r\nconst API = axios.create({\r\n  baseURL: process.env.REACT_APP_API_BASE,\r\n});\r\n\r\nconst Books = () => {\r\n  const [books, setBooks] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const booksPerPage = 12;\r\n\r\n  const fetchBooks = async () => {\r\n    try {\r\n      const res = await API.get('/api/books');\r\n      const booksWithState = res.data.map((book) => ({\r\n        ...book,\r\n        showEmail: false,\r\n      }));\r\n      setBooks(booksWithState);\r\n    } catch (error) {\r\n      console.error('Error fetching books:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchBooks();\r\n  }, []);\r\n\r\n  const indexOfLastBook = currentPage * booksPerPage;\r\n  const indexOfFirstBook = indexOfLastBook - booksPerPage;\r\n  const currentBooks = books.slice(indexOfFirstBook, indexOfLastBook);\r\n  const totalPages = Math.ceil(books.length / booksPerPage);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-blue-100 dark:from-gray-900 dark:to-gray-800 py-16 px-4\">\r\n      <h1 className=\"text-4xl font-bold text-center mb-12 text-blue-700 dark:text-yellow-300 flex justify-center items-center gap-3\">\r\n        <FaBook className=\"text-blue-600 dark:text-yellow-400\" />\r\n        Academic Source Available Books\r\n      </h1>\r\n\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 max-w-6xl mx-auto\">\r\n        {currentBooks.map((book) => (\r\n          <div\r\n            key={book._id}\r\n            className=\"bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden transition hover:shadow-xl border dark:border-gray-700\"\r\n          >\r\n            {/* Image */}\r\n            <div className=\"w-full h-48 overflow-hidden flex items-center justify-center bg-white dark:bg-gray-700\">\r\n              {book.image ? (\r\n                <img\r\n                  src={`${process.env.REACT_APP_API_BASE}${book.image}`}\r\n                  alt={book.name}\r\n                  className=\"h-full w-auto object-contain\"\r\n                  onError={(e) => {\r\n                    e.target.onerror = null;\r\n                    e.target.src = 'https://via.placeholder.com/150';\r\n                  }}\r\n                />\r\n              ) : (\r\n                <FaImage className=\"text-gray-400 text-5xl\" />\r\n              )}\r\n            </div>\r\n\r\n            {/* Book Details */}\r\n            <div className=\"p-4 space-y-2\">\r\n              <h2 className=\"text-lg font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-2\">\r\n                <FaTag /> {book.name}\r\n              </h2>\r\n\r\n              <div className=\"text-sm text-gray-700 dark:text-gray-300 space-y-1\">\r\n                <p className=\"flex items-center gap-2\">\r\n                  <FaUser /> <strong>Seller:</strong> {book.seller}\r\n                </p>\r\n                <p className=\"flex items-center gap-2\">\r\n                  <FaMoneyBillWave /> <strong>Price:</strong> â‚¹{book.price}\r\n                </p>\r\n                <p className=\"flex items-center gap-2\">\r\n                  <FaClock /> <strong>Uploaded:</strong>{' '}\r\n                  {new Date(book.createdAt).toLocaleDateString()}\r\n                </p>\r\n              </div>\r\n\r\n              {/* Contact Seller Button */}\r\n              {book.email ? (\r\n                <>\r\n                  <button\r\n                    onClick={() =>\r\n                      setBooks((prevBooks) =>\r\n                        prevBooks.map((b) =>\r\n                          b._id === book._id\r\n                            ? { ...b, showEmail: !b.showEmail }\r\n                            : b\r\n                        )\r\n                      )\r\n                    }\r\n                    className=\"inline-flex items-center gap-2 mt-2 text-white bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-sm transition\"\r\n                  >\r\n                    <FaEnvelope /> Contact Seller\r\n                  </button>\r\n                  {book.showEmail && (\r\n                    <p className=\"mt-2 text-blue-700 dark:text-blue-300 text-sm font-medium\">\r\n                      {book.email}\r\n                    </p>\r\n                  )}\r\n                </>\r\n              ) : (\r\n                <button\r\n                  disabled\r\n                  className=\"inline-flex items-center gap-2 mt-2 text-white bg-gray-400 px-4 py-2 rounded-lg text-sm cursor-not-allowed\"\r\n                >\r\n                  <FaEnvelope /> Email Not Available\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Pagination */}\r\n      <div className=\"mt-12 flex justify-center items-center gap-4\">\r\n        <button\r\n          disabled={currentPage === 1}\r\n          onClick={() => setCurrentPage((prev) => prev - 1)}\r\n          className=\"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded disabled:opacity-50\"\r\n        >\r\n          Previous\r\n        </button>\r\n\r\n        {[...Array(totalPages)].map((_, idx) => (\r\n          <button\r\n            key={idx + 1}\r\n            onClick={() => setCurrentPage(idx + 1)}\r\n            className={`px-3 py-1 rounded ${\r\n              currentPage === idx + 1\r\n                ? 'bg-blue-600 text-white'\r\n                : 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200'\r\n            }`}\r\n          >\r\n            {idx + 1}\r\n          </button>\r\n        ))}\r\n\r\n        <button\r\n          disabled={currentPage === totalPages}\r\n          onClick={() => setCurrentPage((prev) => prev + 1)}\r\n          className=\"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded disabled:opacity-50\"\r\n        >\r\n          Next\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Books;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}