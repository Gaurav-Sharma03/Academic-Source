{"ast":null,"code":"import _objectSpread from\"C:/Users/Shivam/Desktop/Academic-Source/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import axios from'axios';import{useNavigate,Link}from'react-router-dom';import{FaUser,FaLock,FaUserShield,FaEye,FaEyeSlash}from'react-icons/fa';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API=axios.create({baseURL:process.env.REACT_APP_API_BASE});const LoginPage=()=>{const[formData,setFormData]=useState({email:'',password:'',role:''});const[showPassword,setShowPassword]=useState(false);const[error,setError]=useState('');const navigate=useNavigate();const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));setError('');};const handleSubmit=async e=>{e.preventDefault();try{const res=await API.post('/api/login',formData);const{token,role}=res.data;localStorage.setItem('token',token);localStorage.setItem('role',role);// üîÅ Use role-based redirect page\nnavigate('/verify-login');}catch(err){var _err$response,_err$response$data;const message=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Login failed. Please try again.';setError(message);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-blue-50 dark:bg-gray-900 px-4\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"w-full max-w-md bg-white dark:bg-gray-800 p-8 rounded shadow-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center mb-6\",children:[/*#__PURE__*/_jsx(FaLock,{className:\"text-4xl text-blue-600 dark:text-white mb-2\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-center text-blue-600 dark:text-white\",children:\"Academic Source Login\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"bg-red-100 text-red-700 px-3 py-2 rounded mb-4 text-sm\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200\",children:\"Email\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"absolute top-2.5 left-3 text-gray-400\",children:/*#__PURE__*/_jsx(FaUser,{})}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",required:true,value:formData.email,onChange:handleChange,className:\"w-full pl-10 pr-3 py-2 border rounded focus:outline-none dark:bg-gray-700 dark:text-white\",placeholder:\"you@example.com\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200\",children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"absolute top-2.5 left-3 text-gray-400\",children:/*#__PURE__*/_jsx(FaLock,{})}),/*#__PURE__*/_jsx(\"input\",{type:showPassword?'text':'password',name:\"password\",required:true,value:formData.password,onChange:handleChange,className:\"w-full pl-10 pr-10 py-2 border rounded focus:outline-none dark:bg-gray-700 dark:text-white\",placeholder:\"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{onClick:()=>setShowPassword(prev=>!prev),className:\"absolute top-2.5 right-3 cursor-pointer text-gray-500\",title:showPassword?'Hide Password':'Show Password',children:showPassword?/*#__PURE__*/_jsx(FaEyeSlash,{}):/*#__PURE__*/_jsx(FaEye,{})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200\",children:\"Select Role\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"absolute top-2.5 left-3 text-gray-400\",children:/*#__PURE__*/_jsx(FaUserShield,{})}),/*#__PURE__*/_jsxs(\"select\",{name:\"role\",required:true,value:formData.role,onChange:handleChange,className:\"w-full pl-10 py-2 border rounded dark:bg-gray-700 dark:text-white\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"Select Role\"}),/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"User\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"}),/*#__PURE__*/_jsx(\"option\",{value:\"authority\",children:\"Authority\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded transition\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-center mt-4 text-gray-600 dark:text-gray-300\",children:[\"Don\\u2019t have an account?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/user-register\",className:\"text-blue-600 hover:underline\",children:\"Register here\"})]})]})});};export default LoginPage;","map":{"version":3,"names":["React","useState","axios","useNavigate","Link","FaUser","FaLock","FaUserShield","FaEye","FaEyeSlash","jsx","_jsx","jsxs","_jsxs","API","create","baseURL","process","env","REACT_APP_API_BASE","LoginPage","formData","setFormData","email","password","role","showPassword","setShowPassword","error","setError","navigate","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","res","post","token","data","localStorage","setItem","err","_err$response","_err$response$data","message","response","className","children","onSubmit","type","required","onChange","placeholder","onClick","prev","title","disabled","to"],"sources":["C:/Users/Shivam/Desktop/Academic-Source/frontend/src/pages/LoginPage.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport { FaUser, FaLock, FaUserShield, FaEye, FaEyeSlash } from 'react-icons/fa';\r\n\r\nconst API = axios.create({\r\n  baseURL: process.env.REACT_APP_API_BASE,\r\n});\r\n\r\nconst LoginPage = () => {\r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n    password: '',\r\n    role: '',\r\n  });\r\n\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    setError('');\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      const res = await API.post('/api/login', formData);\r\n      const { token, role } = res.data;\r\n\r\n      localStorage.setItem('token', token);\r\n      localStorage.setItem('role', role);\r\n\r\n      // üîÅ Use role-based redirect page\r\n      navigate('/verify-login');\r\n    } catch (err) {\r\n      const message = err.response?.data?.error || 'Login failed. Please try again.';\r\n      setError(message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-blue-50 dark:bg-gray-900 px-4\">\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        className=\"w-full max-w-md bg-white dark:bg-gray-800 p-8 rounded shadow-md\"\r\n      >\r\n        {/* Header */}\r\n        <div className=\"flex flex-col items-center mb-6\">\r\n          <FaLock className=\"text-4xl text-blue-600 dark:text-white mb-2\" />\r\n          <h2 className=\"text-2xl font-bold text-center text-blue-600 dark:text-white\">\r\n            Academic Source Login\r\n          </h2>\r\n        </div>\r\n\r\n        {error && (\r\n          <p className=\"bg-red-100 text-red-700 px-3 py-2 rounded mb-4 text-sm\">\r\n            {error}\r\n          </p>\r\n        )}\r\n\r\n        {/* Email */}\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200\">\r\n            Email\r\n          </label>\r\n          <div className=\"relative\">\r\n            <span className=\"absolute top-2.5 left-3 text-gray-400\">\r\n              <FaUser />\r\n            </span>\r\n            <input\r\n              type=\"email\"\r\n              name=\"email\"\r\n              required\r\n              value={formData.email}\r\n              onChange={handleChange}\r\n              className=\"w-full pl-10 pr-3 py-2 border rounded focus:outline-none dark:bg-gray-700 dark:text-white\"\r\n              placeholder=\"you@example.com\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Password */}\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200\">\r\n            Password\r\n          </label>\r\n          <div className=\"relative\">\r\n            <span className=\"absolute top-2.5 left-3 text-gray-400\">\r\n              <FaLock />\r\n            </span>\r\n            <input\r\n              type={showPassword ? 'text' : 'password'}\r\n              name=\"password\"\r\n              required\r\n              value={formData.password}\r\n              onChange={handleChange}\r\n              className=\"w-full pl-10 pr-10 py-2 border rounded focus:outline-none dark:bg-gray-700 dark:text-white\"\r\n              placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\r\n            />\r\n            <span\r\n              onClick={() => setShowPassword((prev) => !prev)}\r\n              className=\"absolute top-2.5 right-3 cursor-pointer text-gray-500\"\r\n              title={showPassword ? 'Hide Password' : 'Show Password'}\r\n            >\r\n              {showPassword ? <FaEyeSlash /> : <FaEye />}\r\n            </span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Role */}\r\n        <div className=\"mb-6\">\r\n          <label className=\"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-200\">\r\n            Select Role\r\n          </label>\r\n          <div className=\"relative\">\r\n            <span className=\"absolute top-2.5 left-3 text-gray-400\">\r\n              <FaUserShield />\r\n            </span>\r\n            <select\r\n              name=\"role\"\r\n              required\r\n              value={formData.role}\r\n              onChange={handleChange}\r\n              className=\"w-full pl-10 py-2 border rounded dark:bg-gray-700 dark:text-white\"\r\n            >\r\n              <option value=\"\" disabled>Select Role</option>\r\n              <option value=\"user\">User</option>\r\n              <option value=\"admin\">Admin</option>\r\n              <option value=\"authority\">Authority</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Submit Button */}\r\n        <button\r\n          type=\"submit\"\r\n          className=\"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded transition\"\r\n        >\r\n          Login\r\n        </button>\r\n\r\n        {/* Registration Link */}\r\n        <p className=\"text-sm text-center mt-4 text-gray-600 dark:text-gray-300\">\r\n          Don‚Äôt have an account?{' '}\r\n          <Link to=\"/user-register\" className=\"text-blue-600 hover:underline\">\r\n            Register here\r\n          </Link>\r\n        </p>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}