{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nconst API = axios.create({\n  baseURL: 'http://localhost:5000'\n});\nconst VerifyLoginRedirect = () => {\n  _s();\n  const navigate = useNavigate();\n  useEffect(() => {\n    const verifyUser = async () => {\n      const token = localStorage.getItem('token');\n      const role = localStorage.getItem('role');\n\n      // If no token found\n      if (!token || !role) {\n        navigate('/login');\n        return;\n      }\n      try {\n        // Optional: verify token with backend\n        await API.post('/api/verify-token', {\n          token\n        });\n\n        // Navigate based on role\n        if (role === 'admin') {\n          navigate('/admin-page/adminDashboard');\n        } else if (role === 'authority') {\n          navigate('/authorized-page/AuthorizedDashboard');\n        } else if (role === 'user') {\n          navigate('/user-pages/UserDashboard');\n        } else {\n          localStorage.clear();\n          navigate('/login');\n        }\n      } catch (err) {\n        // Token is invalid or expired\n        localStorage.clear();\n        navigate('/login');\n      }\n    };\n    verifyUser();\n  }, [navigate]);\n  return null; // Or a loading spinner if you want\n};\n_s(VerifyLoginRedirect, \"0pNeyzXk/ByIxyERsdaIrG6js9s=\", false, function () {\n  return [useNavigate];\n});\n_c = VerifyLoginRedirect;\nexport default VerifyLoginRedirect;\nvar _c;\n$RefreshReg$(_c, \"VerifyLoginRedirect\");","map":{"version":3,"names":["useEffect","useNavigate","axios","API","create","baseURL","VerifyLoginRedirect","_s","navigate","verifyUser","token","localStorage","getItem","role","post","clear","err","_c","$RefreshReg$"],"sources":["D:/Academic Resource Management System/frontend/src/components/VerifyLoginRedirect.js"],"sourcesContent":["import { useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nconst API = axios.create({\r\n  baseURL: 'http://localhost:5000',\r\n});\r\n\r\nconst VerifyLoginRedirect = () => {\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const verifyUser = async () => {\r\n      const token = localStorage.getItem('token');\r\n      const role = localStorage.getItem('role');\r\n\r\n      // If no token found\r\n      if (!token || !role) {\r\n        navigate('/login');\r\n        return;\r\n      }\r\n\r\n      try {\r\n        // Optional: verify token with backend\r\n        await API.post('/api/verify-token', { token });\r\n\r\n        // Navigate based on role\r\n        if (role === 'admin') {\r\n          navigate('/admin-page/adminDashboard');\r\n        } else if (role === 'authority') {\r\n          navigate('/authorized-page/AuthorizedDashboard');\r\n        } else if (role === 'user') {\r\n          navigate('/user-pages/UserDashboard');\r\n        } else {\r\n          localStorage.clear();\r\n          navigate('/login');\r\n        }\r\n      } catch (err) {\r\n        // Token is invalid or expired\r\n        localStorage.clear();\r\n        navigate('/login');\r\n      }\r\n    };\r\n\r\n    verifyUser();\r\n  }, [navigate]);\r\n\r\n  return null; // Or a loading spinner if you want\r\n};\r\n\r\nexport default VerifyLoginRedirect;\r\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,KAAK,MAAM,OAAO;AAEzB,MAAMC,GAAG,GAAGD,KAAK,CAACE,MAAM,CAAC;EACvBC,OAAO,EAAE;AACX,CAAC,CAAC;AAEF,MAAMC,mBAAmB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAChC,MAAMC,QAAQ,GAAGP,WAAW,CAAC,CAAC;EAE9BD,SAAS,CAAC,MAAM;IACd,MAAMS,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC7B,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,MAAMC,IAAI,GAAGF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;;MAEzC;MACA,IAAI,CAACF,KAAK,IAAI,CAACG,IAAI,EAAE;QACnBL,QAAQ,CAAC,QAAQ,CAAC;QAClB;MACF;MAEA,IAAI;QACF;QACA,MAAML,GAAG,CAACW,IAAI,CAAC,mBAAmB,EAAE;UAAEJ;QAAM,CAAC,CAAC;;QAE9C;QACA,IAAIG,IAAI,KAAK,OAAO,EAAE;UACpBL,QAAQ,CAAC,4BAA4B,CAAC;QACxC,CAAC,MAAM,IAAIK,IAAI,KAAK,WAAW,EAAE;UAC/BL,QAAQ,CAAC,sCAAsC,CAAC;QAClD,CAAC,MAAM,IAAIK,IAAI,KAAK,MAAM,EAAE;UAC1BL,QAAQ,CAAC,2BAA2B,CAAC;QACvC,CAAC,MAAM;UACLG,YAAY,CAACI,KAAK,CAAC,CAAC;UACpBP,QAAQ,CAAC,QAAQ,CAAC;QACpB;MACF,CAAC,CAAC,OAAOQ,GAAG,EAAE;QACZ;QACAL,YAAY,CAACI,KAAK,CAAC,CAAC;QACpBP,QAAQ,CAAC,QAAQ,CAAC;MACpB;IACF,CAAC;IAEDC,UAAU,CAAC,CAAC;EACd,CAAC,EAAE,CAACD,QAAQ,CAAC,CAAC;EAEd,OAAO,IAAI,CAAC,CAAC;AACf,CAAC;AAACD,EAAA,CAxCID,mBAAmB;EAAA,QACNL,WAAW;AAAA;AAAAgB,EAAA,GADxBX,mBAAmB;AA0CzB,eAAeA,mBAAmB;AAAC,IAAAW,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}